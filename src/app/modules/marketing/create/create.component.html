<cm-slide>
  <div class="close" [routerLink]="['/home/marketing/admin']"><i class="anticon anticon-close"></i></div>

  <h1>新建活动</h1>

  <div class="content">
    <nz-steps [(nzCurrent)]="current">
      <nz-step nzTitle="填写模板信息"></nz-step>
      <nz-step nzTitle="填写页面展示信息"></nz-step>
      <nz-step nzTitle="创建模板完成"></nz-step>
    </nz-steps>
    <nz-tabset [nzSelectedIndex]="current">
      <nz-tab>
        <nz-spin nzTip="正在解析模板信息..." [nzSpinning]="false">
          <form nz-form [formGroup]="tmplFormModel">
            
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label for="name" nz-form-item-required>模板名称</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8">
                <nz-input formControlName="name" nzPlaceHolder="请输入模板名称" nzSize="large" nzId="name"></nz-input>
                <div nz-form-explain *ngIf="getFormControl('name').dirty && ( getFormControl('name').hasError('required') || getFormControl('name').hasError('minlength') || getFormControl('name').hasError('maxlength') )">请输入2-20位字符!</div>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label for="introduce" nz-form-item-required>模板介绍</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8">
                <nz-input formControlName="introduce" nzPlaceHolder="请输入模板介绍" nzSize="large" nzId="introduce"></nz-input>
                <div nz-form-explain *ngIf="getFormControl('introduce').dirty && ( getFormControl('introduce').hasError('required') || getFormControl('introduce').hasError('maxlength') )">请输入100位字符以下!</div>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label nz-form-item-required>模板地址</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8" [nzValidateStatus]="tmplFormModel.controls['address']">
                <nz-input-group nzCompact style="display: flex;">
                  <nz-select formControlName="agreement" nzSize="large" style="width: 72px">
                    <nz-option nzLabel="http://" nzValue="http://"></nz-option>
                    <nz-option nzLabel="https://" nzValue="https://"></nz-option>
                  </nz-select>
                  <input formControlName="address" placeholder="请输入模板地址" nzSize="large" nz-input>
                </nz-input-group>
                <div nz-form-explain *ngIf="getFormControl('address').dirty && (getFormControl('address').hasError('required') || getFormControl('address').hasError('pattern'))">请输入正确的模板地址!</div>
                <div nz-form-explain *ngIf="getFormControl('address').dirty && getFormControl('address').hasError('duplicated')">该模板不存在,请检查地址是否正确!</div>
                <div nz-form-explain *ngIf="getFormControl('address').dirty && getFormControl('address').pending">正在解析模板是否合法...</div>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label nz-form-item-required>场景</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8">
                <nz-select formControlName="scencesId" nzPlaceHolder="请选择模板场景" nzSize="large">
                  <nz-option *ngFor="let item of scencesList" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                </nz-select>
                <div nz-form-explain *ngIf="getFormControl('scencesId').dirty && getFormControl('scencesId').hasError('required')">请选择模板场景!</div>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label nz-form-item-required>节日</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8">
                <nz-select formControlName="festivalId" nzPlaceHolder="请选择模板节日" nzSize="large">
                  <nz-option *ngFor="let item of festivalList" [nzLabel]="item.name" [nzValue]="item.id"></nz-option>
                </nz-select>
                <div nz-form-explain *ngIf="getFormControl('festivalId').dirty && getFormControl('festivalId').hasError('required')">请选择模板节日!</div>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-form-label nz-col [nzSpan]="6">
                <label nz-form-item-required>门店自定义活动信息</label>
              </div>
              <div nz-form-control nz-col [nzSpan]="8">
                <nz-radio-group formControlName="isPermit" [style.width]="'100%'">
                  <label nz-radio-button [nzValue]="1" [style.width]="'50%'">
                    <span>允许</span>
                  </label>
                  <label nz-radio-button [nzValue]="0" [style.width]="'50%'">
                    <span>不允许</span>
                  </label>
                </nz-radio-group>
              </div>
            </div>
            <div nz-form-item nz-row>
              <div nz-col [nzSpan]="8" [nzOffset]="6">
                <button nz-button [nzType]="'primary'" nzSize="large" style="width: 120px;" (click)="_tmplSubmit()">提交</button>
              </div>
            </div>
      
          </form>
        </nz-spin>
      </nz-tab>
      <nz-tab>
        2222
      </nz-tab>
      <nz-tab>
        33333
      </nz-tab>
    </nz-tabset>
  </div>


</cm-slide>
